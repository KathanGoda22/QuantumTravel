{"ast":null,"code":"import _toConsumableArray from\"E:/Software Development Projects/Quantum Travel Website/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"E:/Software Development Projects/Quantum Travel Website/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useContext,useRef,useState}from\"react\";import Commonsection from\"../shared/Commonsection\";import TourCard from\"./../shared/ToursCard\";import Newsletter from\"./../shared/Newsletter\";import{Container,Row,Col}from\"reactstrap\";import{ThemeContext}from\"../shared/Theme\";import{useAnimation,useInView}from\"framer-motion\";import useFetch from\"../hooks/useFetch\";import{BASE_URL}from\"../utils/config\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Tours=function Tours(){var _useContext=useContext(ThemeContext),theme=_useContext.theme;var controls=useAnimation();var elementRef=useRef(null);var isInView=useInView(elementRef,{once:true});useEffect(function(){if(isInView){controls.start(\"visible\");}},[isInView,controls]);var _useState=useState(0),_useState2=_slicedToArray(_useState,2),pageCount=_useState2[0],setPageCount=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),page=_useState4[0],setPage=_useState4[1];var _useFetch=useFetch(\"\".concat(BASE_URL,\"/tours?page=\").concat(page)),tours=_useFetch.data,loading=_useFetch.loading,error=_useFetch.error;var _useFetch2=useFetch(\"\".concat(BASE_URL,\"/tours/search/getTourCount\")),tourCount=_useFetch2.data;useEffect(function(){var pages=Math.ceil(tourCount/6);setPageCount(pages);window.scrollTo(0,0);},[page,tourCount,tours]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Commonsection,{title:\"All tours\"}),/*#__PURE__*/_jsxs(\"div\",{className:theme===\"light\"?\"dark-theme\":\"light-theme\",ref:elementRef,style:{position:\"relative\"},children:[/*#__PURE__*/_jsx(\"section\",{variants:{hidden:{opacity:0,y:75},visible:{opacity:1,y:0}},initial:\"hidden\",animate:controls,transition:{duration:1.5,delay:0.9}}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(Container,{children:[loading&&/*#__PURE__*/_jsx(\"h4\",{className:\"text-center pt-5\",children:\"Loading.......\"}),error&&/*#__PURE__*/_jsx(\"h4\",{className:\"text-center pt-5\",children:error}),!loading&&!error&&/*#__PURE__*/_jsxs(Row,{children:[tours===null||tours===void 0?void 0:tours.map(function(tour){return/*#__PURE__*/_jsx(Col,{lg:\"5\",children:/*#__PURE__*/_jsx(TourCard,{tour:tour})},tour._id);}),/*#__PURE__*/_jsx(Col,{lg:\"12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pagination d-flex align-items-center justify-content-center mt-5 gap-4\",children:_toConsumableArray(Array(pageCount).keys()).map(function(number){return/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setPage(number);},className:page===number?\"active_page\":\"\",children:number+1},number);})})})]})]})}),/*#__PURE__*/_jsx(Newsletter,{})]})]});};export default Tours;","map":{"version":3,"names":["React","useEffect","useContext","useRef","useState","Commonsection","TourCard","Newsletter","Container","Row","Col","ThemeContext","useAnimation","useInView","useFetch","BASE_URL","Tours","theme","controls","elementRef","isInView","once","start","pageCount","setPageCount","page","setPage","tours","data","loading","error","tourCount","pages","Math","ceil","window","scrollTo","position","hidden","opacity","y","visible","duration","delay","map","tour","_id","Array","keys","number"],"sources":["E:/Software Development Projects/Quantum Travel Website/tour-management/frontend/src/pages/Tours.js"],"sourcesContent":["import React, { useEffect, useContext, useRef, useState } from \"react\";\r\nimport Commonsection from \"../shared/Commonsection\";\r\nimport TourCard from \"./../shared/ToursCard\";\r\nimport Newsletter from \"./../shared/Newsletter\";\r\nimport { Container, Row, Col } from \"reactstrap\";\r\nimport { ThemeContext } from \"../shared/Theme\";\r\nimport { useAnimation, useInView } from \"framer-motion\";\r\nimport useFetch from \"../hooks/useFetch\";\r\nimport { BASE_URL } from \"../utils/config\";\r\n\r\nconst Tours = () => {\r\n  const { theme } = useContext(ThemeContext);\r\n\r\n  const controls = useAnimation();\r\n  const elementRef = useRef(null);\r\n  const isInView = useInView(elementRef, { once: true });\r\n\r\n  useEffect(() => {\r\n    if (isInView) {\r\n      controls.start(\"visible\");\r\n    }\r\n  }, [isInView, controls]);\r\n\r\n  const [pageCount, setPageCount] = useState(0);\r\n  const [page, setPage] = useState(0);\r\n\r\n  const {\r\n    data: tours,\r\n    loading,\r\n    error,\r\n  } = useFetch(`${BASE_URL}/tours?page=${page}`);\r\n  const { data: tourCount } = useFetch(`${BASE_URL}/tours/search/getTourCount`);\r\n\r\n  useEffect(() => {\r\n    const pages = Math.ceil(tourCount / 6);\r\n    setPageCount(pages);\r\n    window.scrollTo(0, 0);\r\n  }, [page, tourCount, tours]);\r\n\r\n  return (\r\n    <>\r\n      <Commonsection title={\"All tours\"} />\r\n      <div\r\n        className={theme === \"light\" ? \"dark-theme\" : \"light-theme\"}\r\n        ref={elementRef}\r\n        style={{ position: \"relative\" }}\r\n      >\r\n        <section\r\n          variants={{\r\n            hidden: { opacity: 0, y: 75 },\r\n            visible: { opacity: 1, y: 0 },\r\n          }}\r\n          initial=\"hidden\"\r\n          animate={controls}\r\n          transition={{ duration: 1.5, delay: 0.9 }}\r\n        ></section>\r\n        <section>\r\n          <Container>\r\n            {loading && <h4 className=\"text-center pt-5\">Loading.......</h4>}\r\n            {error && <h4 className=\"text-center pt-5\">{error}</h4>}\r\n            {!loading && !error && (\r\n              <Row>\r\n                {tours?.map((tour) => (\r\n                  <Col lg=\"5\" key={tour._id}>\r\n                    <TourCard tour={tour} />\r\n                  </Col>\r\n                ))}\r\n\r\n                <Col lg=\"12\">\r\n                  <div className=\"pagination d-flex align-items-center justify-content-center mt-5 gap-4\">\r\n                    {[...Array(pageCount).keys()].map((number) => (\r\n                      <span\r\n                        key={number}\r\n                        onClick={() => setPage(number)}\r\n                        className={page === number ? \"active_page\" : \"\"}\r\n                      >\r\n                        {number + 1}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </Col>\r\n              </Row>\r\n            )}\r\n          </Container>\r\n        </section>\r\n        <Newsletter />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Tours;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}