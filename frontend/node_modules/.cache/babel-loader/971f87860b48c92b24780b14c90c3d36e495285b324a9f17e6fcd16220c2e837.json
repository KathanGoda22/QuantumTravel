{"ast":null,"code":"import _regeneratorRuntime from\"E:/Software Development Projects/Quantum Travel Website/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/Software Development Projects/Quantum Travel Website/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"E:/Software Development Projects/Quantum Travel Website/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"E:/Software Development Projects/Quantum Travel Website/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/Software Development Projects/Quantum Travel Website/tour-management/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect,useRef}from\"react\";import\"./login.css\";import{Container,Row,Col,FormGroup,Button,Form}from\"reactstrap\";import{Link,useNavigate}from\"react-router-dom\";import loginImg from\"../assets/images/login.png\";import userIcon from\"../assets/images/user.png\";import{ThemeContext}from\"../shared/Theme\";import{motion,useAnimation,useInView}from\"framer-motion\";import{AuthContext}from\"../context/AuthContext\";import{BASE_URL}from\"../utils/config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useContext=useContext(ThemeContext),theme=_useContext.theme;var controls=useAnimation();var elementRef=useRef(null);var isInView=useInView(elementRef,{once:true});useEffect(function(){if(isInView){controls.start(\"visible\");}},[isInView,controls]);var _useState=useState({email:undefined,password:undefined}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var _useContext2=useContext(AuthContext),dispatch=_useContext2.dispatch;var navigate=useNavigate();var handleChange=function handleChange(e){setCredentials(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},e.target.id,e.target.value));});};var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:\"LOGIN_START\"});_context.prev=2;_context.next=5;return fetch(\"\".concat(BASE_URL,\"/auth/Login\"),{method:\"POST\",headers:{\"content-type\":\"application/json\"},credentials:\"include\",body:JSON.stringify(credentials)});case 5:res=_context.sent;_context.next=8;return res.json();case 8:result=_context.sent;if(!res.ok)alert(result.message);//console.log(result.data);\ndispatch({type:\"LOGIN_SUCCESS\",payload:result.data});navigate(\"/\");_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);dispatch({type:\"LOGIN_FAILURE\",payload:_context.t0.message});case 17:case\"end\":return _context.stop();}},_callee,null,[[2,14]]);}));return function handleClick(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:theme===\"light\"?\"dark-theme\":\"light-theme\",ref:elementRef,style:{position:\"relative\"},children:/*#__PURE__*/_jsx(motion.section,{variants:{hidden:{opacity:0,y:75},visible:{opacity:1,y:0}},initial:\"hidden\",animate:controls,transition:{duration:1.5,delay:0.9},children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{lg:\"9\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login_container d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login_img\",children:/*#__PURE__*/_jsx(\"img\",{src:loginImg,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login_form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user\",children:/*#__PURE__*/_jsx(\"img\",{src:userIcon,alt:\"\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleClick,children:[/*#__PURE__*/_jsxs(FormGroup,{className:\"login_input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"email\",required:true,id:\"email\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",required:true,id:\"password\",onChange:handleChange})]}),/*#__PURE__*/_jsx(Button,{className:\"btn secondary_btn auth_btn\",type:\"submit\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't Have An Account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Create\"})]})]})]})})})})})});};export default Login;","map":{"version":3,"names":["React","useContext","useState","useEffect","useRef","Container","Row","Col","FormGroup","Button","Form","Link","useNavigate","loginImg","userIcon","ThemeContext","motion","useAnimation","useInView","AuthContext","BASE_URL","Login","theme","controls","elementRef","isInView","once","start","email","undefined","password","credentials","setCredentials","dispatch","navigate","handleChange","e","prev","target","id","value","handleClick","preventDefault","type","fetch","method","headers","body","JSON","stringify","res","json","result","ok","alert","message","payload","data","position","hidden","opacity","y","visible","duration","delay"],"sources":["E:/Software Development Projects/Quantum Travel Website/tour-management/frontend/src/pages/Login.js"],"sourcesContent":["import React, { useContext, useState, useEffect, useRef } from \"react\";\r\nimport \"./login.css\";\r\nimport { Container, Row, Col, FormGroup, Button, Form } from \"reactstrap\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport loginImg from \"../assets/images/login.png\";\r\nimport userIcon from \"../assets/images/user.png\";\r\nimport { ThemeContext } from \"../shared/Theme\";\r\nimport { motion, useAnimation, useInView } from \"framer-motion\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { BASE_URL } from \"../utils/config\";\r\n\r\nconst Login = () => {\r\n  const { theme } = useContext(ThemeContext);\r\n\r\n  const controls = useAnimation();\r\n  const elementRef = useRef(null);\r\n  const isInView = useInView(elementRef, { once: true });\r\n\r\n  useEffect(() => {\r\n    if (isInView) {\r\n      controls.start(\"visible\");\r\n    }\r\n  }, [isInView, controls]);\r\n\r\n  const [credentials, setCredentials] = useState({\r\n    email: undefined,\r\n    password: undefined,\r\n  });\r\n\r\n  const { dispatch } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    setCredentials((prev) => ({ ...prev, [e.target.id]: e.target.value }));\r\n  };\r\n\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n\r\n    dispatch({ type: \"LOGIN_START\" });\r\n    try {\r\n      const res = await fetch(`${BASE_URL}/auth/Login`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"content-type\": \"application/json\",\r\n        },\r\n        credentials: \"include\",\r\n        body: JSON.stringify(credentials),\r\n      });\r\n\r\n      const result = await res.json();\r\n      if (!res.ok) alert(result.message);\r\n\r\n      //console.log(result.data);\r\n\r\n      dispatch({ type: \"LOGIN_SUCCESS\", payload: result.data });\r\n      navigate(\"/\");\r\n      \r\n    } catch (error) {\r\n      dispatch({ type: \"LOGIN_FAILURE\", payload: error.message });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={theme === \"light\" ? \"dark-theme\" : \"light-theme\"}\r\n      ref={elementRef}\r\n      style={{ position: \"relative\" }}\r\n    >\r\n      <motion.section\r\n        variants={{\r\n          hidden: { opacity: 0, y: 75 },\r\n          visible: { opacity: 1, y: 0 },\r\n        }}\r\n        initial=\"hidden\"\r\n        animate={controls}\r\n        transition={{ duration: 1.5, delay: 0.9 }}\r\n      >\r\n        <Container>\r\n          <Row>\r\n            <Col lg=\"9\">\r\n              <div className=\"login_container d-flex justify-content-between\">\r\n                <div className=\"login_img\">\r\n                  <img src={loginImg} alt=\"\" />\r\n                </div>\r\n                <div className=\"login_form\">\r\n                  <div className=\"user\">\r\n                    <img src={userIcon} alt=\"\" />\r\n                  </div>\r\n                  <h2>Login</h2>\r\n\r\n                  <Form onSubmit={handleClick}>\r\n                    <FormGroup className=\"login_input\">\r\n                      <input\r\n                        type=\"email\"\r\n                        placeholder=\"email\"\r\n                        required\r\n                        id=\"email\"\r\n                        onChange={handleChange}\r\n                      />\r\n                      <input\r\n                        type=\"password\"\r\n                        placeholder=\"password\"\r\n                        required\r\n                        id=\"password\"\r\n                        onChange={handleChange}\r\n                      />\r\n                    </FormGroup>\r\n                    <Button\r\n                      className=\"btn secondary_btn auth_btn\"\r\n                      type=\"submit\"\r\n                    >\r\n                      Login\r\n                    </Button>\r\n                  </Form>\r\n                  <p>\r\n                    Don't Have An Account? <Link to=\"/register\">Create</Link>\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </motion.section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"+0BAAA,MAAOA,MAAK,EAAIC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACtE,MAAO,aAAa,CACpB,OAASC,SAAS,CAAEC,GAAG,CAAEC,GAAG,CAAEC,SAAS,CAAEC,MAAM,CAAEC,IAAI,KAAQ,YAAY,CACzE,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,MAAOC,SAAQ,KAAM,4BAA4B,CACjD,MAAOC,SAAQ,KAAM,2BAA2B,CAChD,OAASC,YAAY,KAAQ,iBAAiB,CAC9C,OAASC,MAAM,CAAEC,YAAY,CAAEC,SAAS,KAAQ,eAAe,CAC/D,OAASC,WAAW,KAAQ,wBAAwB,CACpD,OAASC,QAAQ,KAAQ,iBAAiB,CAAC,wFAE3C,GAAMC,MAAK,CAAG,QAARA,MAAK,EAAS,CAClB,gBAAkBpB,UAAU,CAACc,YAAY,CAAC,CAAlCO,KAAK,aAALA,KAAK,CAEb,GAAMC,SAAQ,CAAGN,YAAY,EAAE,CAC/B,GAAMO,WAAU,CAAGpB,MAAM,CAAC,IAAI,CAAC,CAC/B,GAAMqB,SAAQ,CAAGP,SAAS,CAACM,UAAU,CAAE,CAAEE,IAAI,CAAE,IAAK,CAAC,CAAC,CAEtDvB,SAAS,CAAC,UAAM,CACd,GAAIsB,QAAQ,CAAE,CACZF,QAAQ,CAACI,KAAK,CAAC,SAAS,CAAC,CAC3B,CACF,CAAC,CAAE,CAACF,QAAQ,CAAEF,QAAQ,CAAC,CAAC,CAExB,cAAsCrB,QAAQ,CAAC,CAC7C0B,KAAK,CAAEC,SAAS,CAChBC,QAAQ,CAAED,SACZ,CAAC,CAAC,wCAHKE,WAAW,eAAEC,cAAc,eAKlC,iBAAqB/B,UAAU,CAACkB,WAAW,CAAC,CAApCc,QAAQ,cAARA,QAAQ,CAChB,GAAMC,SAAQ,CAAGtB,WAAW,EAAE,CAE9B,GAAMuB,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CAC1BJ,cAAc,CAAC,SAACK,IAAI,wCAAWA,IAAI,wBAAGD,CAAC,CAACE,MAAM,CAACC,EAAE,CAAGH,CAAC,CAACE,MAAM,CAACE,KAAK,IAAG,CAAC,CACxE,CAAC,CAED,GAAMC,YAAW,4FAAG,iBAAOL,CAAC,kIAC1BA,CAAC,CAACM,cAAc,EAAE,CAElBT,QAAQ,CAAC,CAAEU,IAAI,CAAE,aAAc,CAAC,CAAC,CAAC,sCAEdC,MAAK,WAAIxB,QAAQ,gBAAe,CAChDyB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDf,WAAW,CAAE,SAAS,CACtBgB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAClB,WAAW,CAClC,CAAC,CAAC,QAPImB,GAAG,qCASYA,IAAG,CAACC,IAAI,EAAE,QAAzBC,MAAM,eACZ,GAAI,CAACF,GAAG,CAACG,EAAE,CAAEC,KAAK,CAACF,MAAM,CAACG,OAAO,CAAC,CAElC;AAEAtB,QAAQ,CAAC,CAAEU,IAAI,CAAE,eAAe,CAAEa,OAAO,CAAEJ,MAAM,CAACK,IAAK,CAAC,CAAC,CACzDvB,QAAQ,CAAC,GAAG,CAAC,CAAC,iFAGdD,QAAQ,CAAC,CAAEU,IAAI,CAAE,eAAe,CAAEa,OAAO,CAAE,YAAMD,OAAQ,CAAC,CAAC,CAAC,oEAE/D,kBAzBKd,YAAW,4CAyBhB,CAED,mBACE,YACE,SAAS,CAAEnB,KAAK,GAAK,OAAO,CAAG,YAAY,CAAG,aAAc,CAC5D,GAAG,CAAEE,UAAW,CAChB,KAAK,CAAE,CAAEkC,QAAQ,CAAE,UAAW,CAAE,uBAEhC,KAAC,MAAM,CAAC,OAAO,EACb,QAAQ,CAAE,CACRC,MAAM,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,EAAG,CAAC,CAC7BC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAC9B,CAAE,CACF,OAAO,CAAC,QAAQ,CAChB,OAAO,CAAEtC,QAAS,CAClB,UAAU,CAAE,CAAEwC,QAAQ,CAAE,GAAG,CAAEC,KAAK,CAAE,GAAI,CAAE,uBAE1C,KAAC,SAAS,wBACR,KAAC,GAAG,wBACF,KAAC,GAAG,EAAC,EAAE,CAAC,GAAG,uBACT,aAAK,SAAS,CAAC,gDAAgD,wBAC7D,YAAK,SAAS,CAAC,WAAW,uBACxB,YAAK,GAAG,CAAEnD,QAAS,CAAC,GAAG,CAAC,EAAE,EAAG,EACzB,cACN,aAAK,SAAS,CAAC,YAAY,wBACzB,YAAK,SAAS,CAAC,MAAM,uBACnB,YAAK,GAAG,CAAEC,QAAS,CAAC,GAAG,CAAC,EAAE,EAAG,EACzB,cACN,oBAAI,OAAK,EAAK,cAEd,MAAC,IAAI,EAAC,QAAQ,CAAE2B,WAAY,wBAC1B,MAAC,SAAS,EAAC,SAAS,CAAC,aAAa,wBAChC,cACE,IAAI,CAAC,OAAO,CACZ,WAAW,CAAC,OAAO,CACnB,QAAQ,MACR,EAAE,CAAC,OAAO,CACV,QAAQ,CAAEN,YAAa,EACvB,cACF,cACE,IAAI,CAAC,UAAU,CACf,WAAW,CAAC,UAAU,CACtB,QAAQ,MACR,EAAE,CAAC,UAAU,CACb,QAAQ,CAAEA,YAAa,EACvB,GACQ,cACZ,KAAC,MAAM,EACL,SAAS,CAAC,4BAA4B,CACtC,IAAI,CAAC,QAAQ,UACd,OAED,EAAS,GACJ,cACP,qBAAG,yBACsB,mBAAC,IAAI,EAAC,EAAE,CAAC,WAAW,UAAC,QAAM,EAAO,GACvD,GACA,GACF,EACF,EACF,EACI,EACG,EACb,CAEV,CAAC,CAED,cAAed,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}